name: 🧪 Test Skyline-PipeLine
on:
  push:


jobs:
  
  build:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./ALL_flight_handling

    steps:

    - name: 📂 Checkout
      uses: actions/checkout@v3
    
    - name: 🔵 Set up Python 3.12.2
      uses: actions/setup-python@v3

    - name: ⏬ Install dependencies
      run: |
        pip install pytest
        pip install -e .
        pip install git+https://${GITHUB_USER}:${GITHUB_TOKEN}@github.com/Green2Moon/SkylineAutomation.git#subdirectory=${azure_operations-0.0.2-py3-none-any.whl}        
        pip install git+https://${GITHUB_USER}:${GITHUB_TOKEN}@github.com/Green2Moon/SkylineAutomation.git#subdirectory=${inf_rabbit_utils-0.1.2-py3-none-any.whl}        

        
    - name: ✅ Run tests
      run: |
        pytest 
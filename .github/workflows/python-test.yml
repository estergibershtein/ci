name: üß™ Test Skyline-PipeLine
on:
  push:


jobs:
  
  build:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./ALL_flight_handling

    steps:

    - name: Make envfile
      uses: SpicyPizza/create-envfile@v1
      with:
        REDIS_HOST: '172.17.0.5'
        REDIS_PORT: 6379 ,
        RABBITMQ_HOST: '172.17.0.4',
        RABBITMQ_PORT: 5672 ,
        RABBITMQ_USER: 'guest',
        RABBITMQ_PASSWORD: 'guest' ,
        OUTER_RABBITMQ_HOST: '172.17.0.4' ,
        OUTER_RABBITMQ_PORT: 5672 ,
        OUTER_RABBITMQ_USER: 'guest' ,
        OUTER_RABBITMQ_PASSWORD: 'guest' ,
        EMAILS: "[recp1@org1.com](mailto:recp1@org1.com),recp2@org1.com" ,
        file_name: .env
        
    - name: üìÇ Checkout
      uses: actions/checkout@v3
    
    - name: üîµ Set up Python 3.12.2
      uses: actions/setup-python@v3

    - name: ‚è¨ Install dependencies
      run: |
        pip install pytest
        pip install -e .
        pip install azure_operations-0.0.2-py3-none-any.whl
        pip install inf_rabbit_utils-0.1.2-py3-none-any.whl

        
    - name: ‚úÖ Run tests
      run: |
        pytest 
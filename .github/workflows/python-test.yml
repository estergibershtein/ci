name: 🧪 Test Skyline-PipeLine
on:
  push:


jobs:
  
  build:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./ALL_flight_handling

    steps:

    - name: Make envfile
      uses: SpicyPizza/create-envfile@v1
      with:
        REDIS_HOST: '172.17.0.5'
        REDIS_PORT: 6379
        file_name: .env
        
    - name: 📂 Checkout
      uses: actions/checkout@v3
    
    - name: 🔵 Set up Python 3.12.2
      uses: actions/setup-python@v3

    - name: ⏬ Install dependencies
      run: |
        pip install pytest
        pip install -e .
        pip install azure_operations-0.0.2-py3-none-any.whl
        pip install inf_rabbit_utils-0.1.2-py3-none-any.whl

        
    - name: ✅ Run tests
      run: |
        pytest 